<div class="section-card" id="card-snooze">
    <div style="font-weight:600; margin-bottom:10px;">
        <i class="fas fa-clock"></i> ตั้งค่าเวลา Snooze (วินาที)
    </div>
    <div class="input-group">
        <input type="number" id="snzMain" placeholder="ระบุจำนวนวินาที เช่น 30" oninput="markChanged('card-snooze')">
    </div>
    <p class="warning-text">⚠️ ข้อมูลเปลี่ยนไป กรุณากดบันทึก</p>
    <button class="btn-save" onclick="saveSnooze()">บันทึกเวลา Snooze</button>
    <div class="clear"></div>
</div>

<script type="module">
    // ... ส่วนบนคงเดิม ...

    // แก้ไขฟังก์ชัน saveSnooze
    window.saveSnooze = () => {
        const snoozeValue = parseInt(document.getElementById('snzMain').value) || 0;
        // บันทึกเป็นตัวเลขเดี่ยวๆ ลงในกิ่ง SnoozeTime (วินาที)
        set(ref(database, 'Settings/SnoozeTime'), snoozeValue)
        .then(() => { 
            alert('บันทึกเวลาหยุดแจ้งเตือนชั่วคราว ' + snoozeValue + ' วินาทีแล้ว'); 
            document.getElementById('card-snooze').classList.remove('changed'); 
            checkUnsaved(); 
        });
    };

    // แก้ไขส่วน onValue เพื่อดึงข้อมูลมาแสดงผล
    onValue(ref(database, 'Settings'), (snap) => {
        const d = snap.val(); if(!d) return;
        
        // ... การดึงค่าอื่นๆ คงเดิม ...
        document.getElementById('villageName').value = d.VillageName || "";
        document.getElementById('themeMode').value = d.Theme || "auto";
        document.getElementById('totalHouses').value = d.TotalHouses || 8;

        // ดึงค่า SnoozeTime มาโชว์ในช่องกรอก
        if(d.SnoozeTime !== undefined) {
            document.getElementById('snzMain').value = d.SnoozeTime;
        }

        // ส่วนสร้างช่องชื่อบ้าน (Names Container)
        const container = document.getElementById('namesContainer');
        container.innerHTML = "";
        for(let i=1; i<=d.TotalHouses; i++){
            container.innerHTML += `<div><small>หลังที่ ${i}</small><input type="text" class="house-name-input" data-id="House${i}" value="${(d.HouseNames && d.HouseNames['House'+i]) || 'บ้านหลังที่ '+i}" oninput="markChanged('card-names')"></div>`;
        }
    });
</script>
